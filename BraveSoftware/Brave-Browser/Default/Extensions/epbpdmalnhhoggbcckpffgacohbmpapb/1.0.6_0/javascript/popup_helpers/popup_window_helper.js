var DarkReader,__extends=this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o};!function(e){!function(e){var t=function(t){function n(n){var o=this;t.call(this,{title:"Dark Theme Settings",scope:n,scrollBar:"none"},[new xp.VBox({style:"controlContainer modeToggleContainer drk_mode_container"},[new xp.HBox({style:"line drk_mode_logo"},[new xp.Button({style:"drk_mode_logo_btn",icon:".moonIcon"}),new xp.Label({text:"Dark Mode",style:"drk_mode_label_logo",flex:"none"}),new xp.Label({text:"",flex:"none",name:"modeOnUntil"}),new e.Toggle({value:"{config.mode}",valueOn:1,valueOff:0,labelOn:"",labelOff:"",flex:"stretch",onClick:function(e){e.element.elementOff.className.search("active")>-1&&1===n.config.modeSchedule&&(n.config.modeSchedule=0,o.showHideOnUntilLabel(n,"dark"),o.setDarkScheduleState())}})]),new xp.Button({style:"iconButton settingsButton",icon:".gearIcon",onClick:function(e){document.getElementsByClassName("settings_wrap")[0].style.display="block",document.getElementsByClassName("tabPanelContainer")[0].style.display="none"}})]),new xp.VBox({style:"settings_wrap",flex:"none"},[new xp.VBox({style:"settings_box",flex:"none"},[new xp.VBox({name:"modeToggle",style:"controlContainer modeToggleContainer drk_mode_container"},[new xp.HBox({style:"line drk_mode_logo"},[new xp.Button({style:"drk_mode_logo_btn",icon:".moonIcon"}),new xp.Label({text:"Dark Mode",style:"drk_mode_label_logo",flex:"none"}),new xp.Label({text:"",flex:"none"}),new e.Toggle({value:"{config.mode}",valueOn:1,valueOff:0,labelOn:"",labelOff:"",flex:"stretch",onClick:function(e){e.element.elementOff.className.search("active")>-1&&1===n.config.modeSchedule&&(n.config.modeSchedule=0,o.showHideOnUntilLabel(n,"dark"),o.setDarkScheduleState())}})]),new xp.HBox({style:"drk_mode_settings_logo"},[new xp.Label({text:"Settings",style:"drk_mode_label_settings_logo",flex:"none"}),new xp.Button({style:"iconButton settings_close",icon:".settingsCloseIcon",onClick:function(){document.getElementsByClassName("settings_wrap")[0].style.display="none",document.getElementsByClassName("tabPanelContainer")[0].style.display="flex"}})])]),new xp.Html({html:{tag:"div",attrs:{class:"seperator"}},flex:"none"}),new xp.Html({html:{tag:"div",attrs:{class:"shortcutHeading"},children:["Shortcuts"]},flex:"none"}),new xp.HBox({style:"command_wrap",flex:"none"},[new xp.Label({text:"On/Off Extension",style:"drk_mode_shortcut_label"}),new xp.HBox({style:"drk_mode_edit_shortcut_wrapper",flex:"none"},[new e.HotkeyLink({commandName:"toggle",noHotkeyText:"Alt+Shift+E",hotkeyTextTemplate:"\n#HOTKEY",style:"status"}),new xp.Button({style:"drk_mode_logo_btn",text:"Edit",onClick:function(){chrome.tabs.create({url:"chrome://extensions/shortcuts"})}})])]),new xp.HBox({style:"command_wrap",flex:"none"},[new xp.Label({text:"On/Off Dark Mode ",style:"drk_mode_shortcut_label"}),new xp.HBox({style:"drk_mode_edit_shortcut_wrapper",flex:"none"},[new e.HotkeyLink({commandName:"darkModeToggle",noHotkeyText:"Alt+Shift+D",hotkeyTextTemplate:"\n#HOTKEY",style:"status"}),new xp.Button({style:"drk_mode_logo_btn",text:"Edit",onClick:function(){chrome.tabs.create({url:"chrome://extensions/shortcuts"})}})])]),new xp.HBox({style:"command_wrap",flex:"none"},[new xp.Label({text:"On/Off Night Shift ",style:"drk_mode_shortcut_label"}),new xp.HBox({style:"drk_mode_edit_shortcut_wrapper",flex:"none"},[new e.HotkeyLink({commandName:"nightModeToggle",noHotkeyText:"Alt+Shift+S",hotkeyTextTemplate:"\n#HOTKEY",style:"status"}),new xp.Button({style:"drk_mode_logo_btn",text:"Edit",onClick:function(){chrome.tabs.create({url:"chrome://extensions/shortcuts"})}})])]),new xp.Html({html:{tag:"div",attrs:{class:"seperator"}},flex:"none"})])]),new xp.Label({text:"Auto added to Blacklist",name:"autoAddMsg",flex:"none"}),new xp.Label({text:"Removed from Blacklist",name:"autoRemoveMsg",flex:"none"}),new xp.VBox({name:"siteToggleWrap",style:"controlContainer modeToggleContainer",enabled:"{enabled}"},[new xp.HBox({style:"line"},[new xp.Label({text:"",name:"currentSiteName",flex:"none",style:"drk_mode_label_helper"}),new e.Toggle({name:"siteToggle2",valueOn:1,valueOff:0,labelOn:"",labelOff:"",flex:"stretch",onClick:function(e){var t,o;-1===e.domEvent.target.parentElement.className.search("switchedOn")?(t=document.getElementById("autoAddMsg"),o=document.getElementById("autoRemoveMsg")):(t=document.getElementById("autoRemoveMsg"),o=document.getElementById("autoAddMsg"));var l=t.className;o.className;-1===l.search("showAutoAddMsg")&&(t.className=t.className+" showAutoAddMsg",o.className=o.className.replace(/showAutoAddMsg/g,""),setTimeout((function(){t.className=l}),3e3)),n.toggleCurrentSite(e)}})])]),new e.TabPanel({onTabSwitched:function(e){},flex:"stretch",enabled:"{enabled}"},[new e.Tab({tabName:"Home",itemsAlign:"stretch",name:"home"},[new e.Range({label:"Brightness: ",step:.1,value:"{config.brightness}",setterConvertor:function(e){return(e-50)/100},getterConvertor:function(e){return Math.round(100*e)+50},statusCreator:function(e){return e>100?"+"+(e-100):e<100?"-"+(100-e):"0"}}),new e.Range({label:"Contrast:",step:.1,value:"{config.contrast}",setterConvertor:function(e){return(e-50)/100},getterConvertor:function(e){return Math.round(100*e)+50},statusCreator:function(e){return e>100?"+"+(e-100):e<100?"-"+(100-e):"0"}}),new e.Range({label:"Grayscale: ",step:.1,value:"{config.grayscale}",setterConvertor:function(e){return e/100},getterConvertor:function(e){return Math.round(100*e)},statusCreator:function(e){return e>0?"+"+e:"0"}}),new xp.VBox({name:"nightModeToggle",style:"controlContainer modeToggleContainer"},[new xp.HBox({style:"line"},[new xp.Label({text:"Night Shift",flex:"none",style:"drk_mode_label_helper"}),new xp.Label({text:"",flex:"none",name:"nightOnUntil"}),new e.Toggle({value:"{config.nightMode}",valueOn:1,valueOff:0,labelOn:"",labelOff:"",flex:"grow",onClick:function(e){e.element.elementOff.className.search("active")>-1&&1===n.config.nightSchedule&&(n.config.nightSchedule=0,o.showHideOnUntilLabel(n,"night"),o.setNightScheduleState())}})])]),new e.Range({label:"Color Temperature:           ",step:.1,value:"{config.warm}",bottomLeftLabel:"Less warm",bottomRightLabel:"More warm",style:"colorTempRange",setterConvertor:function(e){return e/100},getterConvertor:function(e){return Math.round(100*e)},statusCreator:function(e){return e>0?e+"%":"off"}}),new xp.Label({style:"status nightShiftWarning",text:""}),new xp.Button({style:"resetToDefaultBtn",text:"Reset Settings",onClick:function(){n.resetToDefault()}})]),new e.Tab({tabName:"Sites"},[new e.Toggle({style:"toggleWithLabel",value:"{config.activeSiteList}",valueOn:0,valueOff:1,labelOn:"Whitelist Mode",labelOff:"Blacklist Mode",flex:"none"}),new xp.VBox({flex:"stretch",scrollBar:"vertical",style:"siteListParent blackList"},[new e.SiteList({sites:"{config.blackList}",init:function(e){return o.blackList=e}})]),new xp.VBox({flex:"stretch",scrollBar:"vertical",style:"siteListParent whiteList"},[new e.SiteList({sites:"{config.whiteList}",init:function(e){return o.whiteList=e}})])]),new e.Tab({tabName:"Schedule"},[new xp.VBox({name:"modeScheduleToggle",style:"controlContainer modeToggleContainer"},[new xp.HBox({name:"darkModeScheduleToggleWrap",style:"line scheduleToggleWrap"},[new xp.Label({text:"Dark Mode Schedule",flex:"none"}),new e.Toggle({name:"darkModeScheduleToggle",value:"{config.modeSchedule}",valueOn:1,valueOff:0,labelOn:"",labelOff:"",flex:"stretch",onClick:function(e){e.element.elementOff.className.search("active")>-1?n.toggleModeBasedOnSchedule("dark",!0):n.toggleModeBasedOnSchedule("dark",!1),o.setDarkScheduleState(),o.showHideOnUntilLabel(n,"dark")}})]),new xp.HBox({name:"darkScheduleTimesWrap",style:"scheduleTimesWrap"},[new xp.HBox({flex:"stretch",style:"controlContainer"},[new xp.Label({text:"From",flex:"none"}),new xp.TextBox({style:"timeTextBox",flex:"stretch",inputType:"time",value:"{config.modeScheduleFrom}"})]),new xp.HBox({flex:"stretch",style:"controlContainer"},[new xp.Label({text:"To",flex:"none"}),new xp.TextBox({style:"timeTextBox",flex:"stretch",inputType:"time",value:"{config.modeScheduleTo}"})])])]),new xp.VBox({name:"nightScheduleToggle",style:"controlContainer modeToggleContainer"},[new xp.HBox({name:"nightModeScheduleToggleWrap",style:"line scheduleToggleWrap"},[new xp.Label({text:"Night Shift Schedule",flex:"none"}),new e.Toggle({name:"nightModeScheduleToggle",value:"{config.nightSchedule}",valueOn:1,valueOff:0,labelOn:"",labelOff:"",flex:"stretch",onClick:function(e){e.element.elementOff.className.search("active")>-1?n.toggleModeBasedOnSchedule("night",!0):n.toggleModeBasedOnSchedule("night",!1),o.setNightScheduleState(),o.showHideOnUntilLabel(n,"night")}})]),new xp.HBox({name:"nightScheduleTimesWrap",style:"scheduleTimesWrap"},[new xp.HBox({flex:"stretch",style:"controlContainer"},[new xp.Label({text:"From",flex:"none"}),new xp.TextBox({style:"timeTextBox",flex:"stretch",inputType:"time",value:"{config.nightScheduleFrom}"})]),new xp.HBox({flex:"stretch",style:"controlContainer"},[new xp.Label({text:"To",flex:"none"}),new xp.TextBox({style:"timeTextBox",flex:"stretch",inputType:"time",value:"{config.nightScheduleTo}"})])])])])]),new xp.VBox({style:"confirm_clear_wrap rateConfirmClearWrap",flex:"none"},[new xp.VBox({style:"confirm_box rateNowConfirmBox",flex:"none"},[new xp.Button({style:"iconButton rate_close",icon:".rateCloseIcon",onClick:function(){document.getElementsByClassName("rateConfirmClearWrap")[0].style.display="none"}}),new xp.HBox({style:"confirm_text",flex:"none"},[new xp.Label({text:"Is our extension useful to you?"})]),new xp.HBox({style:"confirm_btn_wrap",flex:"none"},[new xp.Button({style:"confirm_no",text:"NO, I HAVE A FEEDBACK",onClick:function(){chrome.tabs.create({url:"https://chrome.google.com/webstore/detail/"+chrome.runtime.id+"/reviews"})}}),new xp.Button({style:"confirm_yes",text:"YES, GIVE IT 5 STAR",onClick:function(){chrome.tabs.create({url:"https://chrome.google.com/webstore/detail/"+chrome.runtime.id+"/reviews"})}})])])]),new xp.Button({style:"rateNowBtn",text:"Rate us, please!",onClick:function(){document.getElementsByClassName("rateConfirmClearWrap")[0].style.display="block"}})]),this.initSiteToggleButton(n,this.currentSiteName,this.siteToggle2),this.handleSiteListToggle(n),this.detectChromiumIssue750419(),this.showHideOnUntilLabel(n,"dark"),this.showHideOnUntilLabel(n,"night"),this.setDarkScheduleState(),this.setNightScheduleState(),n.incrementPopupOpenCount(1);var l=((new Date).getTime()-n.installedTimestamp)/1e3;l<=86400&&100===n.popupOpenCount&&(document.getElementsByClassName("rateConfirmClearWrap")[0].style.display="block",n.incrementPopupOpenCount(-1)),l>86400&&n.popupOpenCount>=0&&(document.getElementsByClassName("rateConfirmClearWrap")[0].style.display="block",n.incrementPopupOpenCount(-1))}return __extends(n,t),n.prototype.setDarkScheduleState=function(){0===this.darkModeScheduleToggle.value?(this.darkScheduleTimesWrap.enabled=!0,this.darkModeScheduleToggleWrap.enabled=!1):(this.darkScheduleTimesWrap.enabled=!1,this.darkModeScheduleToggleWrap.enabled=!0)},n.prototype.setNightScheduleState=function(){0===this.nightModeScheduleToggle.value?(this.nightScheduleTimesWrap.enabled=!0,this.nightModeScheduleToggleWrap.enabled=!1):(this.nightScheduleTimesWrap.enabled=!1,this.nightModeScheduleToggleWrap.enabled=!0)},n.prototype.getTemplate=function(){for(;document.body.lastElementChild;)document.body.removeChild(document.body.lastElementChild);return t.prototype.getTemplate.call(this)},n.prototype.formatTime=function(e){var t=e.split(":"),n=Number(t[0]);return(n>12?n-12:n)+":"+t[1]+" "+(n>12?"pm":"am")},n.prototype.showHideOnUntilLabel=function(e,t){"dark"===t&&(1===e.config.modeSchedule?e.isScheduleOn(e.config.modeScheduleFrom,e.config.modeScheduleTo)?this.modeOnUntil.text="(On until "+this.formatTime(e.config.modeScheduleTo)+")":this.modeOnUntil.text="(Off until "+this.formatTime(e.config.modeScheduleFrom)+")":this.modeOnUntil.text=""),"night"===t&&(1===e.config.nightSchedule?e.isScheduleOn(e.config.nightScheduleFrom,e.config.nightScheduleTo)?this.nightOnUntil.text="(On until "+this.formatTime(e.config.nightScheduleTo)+")":this.nightOnUntil.text="(Off until "+this.formatTime(e.config.nightScheduleFrom)+")":this.nightOnUntil.text="")},n.prototype.handleSiteListToggle=function(e){1===e.config.activeSiteList?(document.getElementsByClassName("blackList")[0].style.display="block",document.getElementsByClassName("whiteList")[0].style.display="none"):0===e.config.activeSiteList&&(document.getElementsByClassName("blackList")[0].style.display="none",document.getElementsByClassName("whiteList")[0].style.display="block")},n.prototype.initSiteToggleButton=function(e,t,n){var o=this,l=this;e.getActiveTabInfo((function(a){n.value=e.enabled&&e.config.blackList.indexOf(a.host)<0?1:0;var i=new xp.EventRegistrar;if(i.subscribe(e.onPropertyChanged,(function(t){"enabled"===t&&(n.value=e.enabled&&e.config.blackList.indexOf(a.host)<0?1:0)})),i.subscribe(e.config.onPropertyChanged,(function(t){"activeSiteList"===t&&l.handleSiteListToggle(e),"invertListed"===t&&(n.value=e.enabled&&e.config.blackList.indexOf(a.host)<0?1:0)})),o.onRemoved.addHandler((function(){return i.unsubscribeAll()})),a.host){var s=a.host.split("."),r=a.host;s.forEach((function(e,t){if(t>0)document.createElement("wbr"),document.createTextNode(".")})),t.domElement.innerText=r}else t.domElement.innerText="current site"}))},n.prototype.detectChromiumIssue750419=function(){var e=navigator.userAgent.toLowerCase(),t=e.match(/chrom[e|ium]\/([^ ]+)/);if(t&&t[1]){var n=t[1],o=0===navigator.platform.toLowerCase().indexOf("win"),l=e.indexOf("vivaldi")>=0,a=e.indexOf("yabrowser")>=0,i=e.indexOf("opr")>=0||e.indexOf("opera")>=0;n>"62.0.3167.0"&&o&&!l&&!a&&!i&&document.documentElement.classList.add("chromium-issue-750419")}},n}(xp.Window);e.PopupWindow=t}(e.Popup||(e.Popup={}))}(DarkReader||(DarkReader={}));