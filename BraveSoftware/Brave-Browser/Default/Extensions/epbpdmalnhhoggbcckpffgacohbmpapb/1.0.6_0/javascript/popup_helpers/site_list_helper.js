var DarkReader,__extends=this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o};!function(e){!function(e){var t=function(e){function t(t){e.call(this,t),this.addTextBox("",void 0,!0),this.addClearButton()}return __extends(t,e),t.prototype.getTemplate=function(){var t=e.prototype.getTemplate.call(this);return t.classList.add("SiteList"),t},t.prototype.defineProperties=function(){var t=this;e.prototype.defineProperties.call(this),this.sitesChangeRegistrar=new xp.EventRegistrar,this.defineProperty("sites",{setter:function(e){t.sitesChangeRegistrar.unsubscribeAll(),e&&(t.sitesChangeRegistrar.subscribe(e.onCollectionChanged,(function(e){switch(e.action){case xp.CollectionChangeAction.Create:t.addTextBox(e.newItem,e.newIndex);break;case xp.CollectionChangeAction.Delete:t.removeTextBox(e.oldIndex);break;default:throw new Error("Not implemented.")}})),e.forEach((function(e,n){return t.addTextBox(e,n)})))}})},t.prototype.addTextBox=function(e,t,n){var o=this,i=new xp.TextBox({text:e,style:"siteListTextBox",placeholder:"Enter site address here...",readonly:!n,onTextChange:function(e){var t=e.newText.trim(),s=!!t.match(/^([^\.\s]+?\.?)+$/);n&&s&&-1===o.sites.indexOf(t)&&(o.sites.push(t),i.text="",o.focus())}});void 0===t&&(t=this.children.length);var s,r,l=new xp.Button({style:"iconButton closeIconButton"+(n?" hideCloseIcon":""),icon:".closeIcon",onClick:function(){o.sites.splice(o.sites.indexOf(e),1)}});if(r=new xp.Label({style:"drk_mode_add_site_logo",text:"Add Site"}),n){var a=new xp.Button({style:"siteAddButton",text:"Add",onClick:function(e){}});s=new xp.HBox({style:"line siteListItemWrap siteListItemWrap-Last"},[i,a]),this.insert(r,t),this.insert(s,t+1)}else s=new xp.HBox({style:"line siteListItemWrap"},[i,l]),this.insert(s,t)},t.prototype.removeTextBox=function(e){this.children[e].remove()},t.prototype.addClearButton=function(){var e=this,t=this,n=new xp.VBox({style:"confirm_clear_wrap",flex:"none"},[new xp.VBox({style:"confirm_box",flex:"none",init:function(t){return e.confirmBox=t}},[new xp.HBox({style:"confirm_heading",flex:"none"},[new xp.Label({text:"Important!"})]),new xp.HBox({style:"confirm_text",flex:"none"},[new xp.Label({text:"Do you want to clear all website from the list?"})]),new xp.HBox({style:"confirm_btn_wrap",flex:"none"},[new xp.Button({style:"confirm_yes",text:"Yes",onClick:function(){for(var e=t.sites.length,n=0;n<e;n++)t.sites.pop();t.confirmBox.domElement.style.display="none"}}),new xp.Button({style:"confirm_no",text:"No",onClick:function(){t.confirmBox.domElement.style.display="none"}})])]),new xp.Button({style:"clearListBtn",text:"Clear List",onClick:function(){t.confirmBox.domElement.style.display="block"}})]),o=new xp.HBox({style:"line clearListWrap"},[n]),i=this.children.length;this.insert(o,i)},t.prototype.focus=function(){this.children[this.children.length-1].focus();var e=this.parent.domElement;e.scrollTop=e.scrollHeight},t}(xp.VBox);e.SiteList=t}(e.Popup||(e.Popup={}))}(DarkReader||(DarkReader={}));